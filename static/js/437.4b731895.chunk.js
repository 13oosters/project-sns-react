"use strict";(self.webpackChunkproject_sns_react=self.webpackChunkproject_sns_react||[]).push([[437],{1437:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r=n(4165),i=n(2982),o=n(5861),a=n(885),s=n(2791),c=n(5671),u=n(3144),l=n(136),f=n(516);function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}var h=new Map,p=new WeakMap,v=0,g=void 0;function y(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return"".concat(t,"_").concat("root"===t?(n=e.root)?(p.has(n)||(v+=1,p.set(n,v.toString())),p.get(n)):"0":e[t]);var n})).toString()}function w(e){var t=y(e),n=h.get(t);if(!n){var r,i=new Map,o=new IntersectionObserver((function(t){t.forEach((function(t){var n,o=t.isIntersecting&&r.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=o),null==(n=i.get(t.target))||n.forEach((function(e){e(o,t)}))}))}),e);r=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:o,elements:i},h.set(t,n)}return n}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;if("undefined"===typeof window.IntersectionObserver&&void 0!==r){var i=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var o=w(n),a=o.id,s=o.observer,c=o.elements,u=c.get(e)||[];return c.has(e)||c.set(e,u),u.push(t),s.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(c.delete(e),s.unobserve(e)),0===c.size&&(s.disconnect(),h.delete(a))}}var Z=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function k(e){return"function"!==typeof e.children}s.Component;var j=n(9086),m=n(2037),x=n(4036),V=n(9079),S=n(184);function I(){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(V.Z,{})})}var C,O=n(168),A=n(6444),E=n(8300),M=A.ZP.div(C||(C=(0,O.Z)(["\n  height: calc(100% - 112.8px);\n  overflow-y: scroll;\n  padding: 0;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"])));function R(e){var t=e.feed,n=e.setFeed,r=e.ref1,i=e.wait;return(0,S.jsx)(M,{children:(0,S.jsx)(E.Z,{feed:t,setFeed:n,ref1:r,wait:i})})}var F=n(2681);function _(){var e=(0,s.useState)([]),t=(0,a.Z)(e,2),n=t[0],c=t[1],u=(0,s.useState)(!1),l=(0,a.Z)(u,2),f=l[0],d=l[1],h=(0,s.useState)(10),p=(0,a.Z)(h,2),v=p[0],g=p[1],y=(0,s.useState)(3),w=(0,a.Z)(y,2),Z=w[0],k=w[1],V=(0,s.useState)(!1),C=(0,a.Z)(V,2),O=C[0],A=(C[1],function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,o){var a,s,u,l,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.Z.get("/post/feed/?limit=10&skip=".concat(t),{header:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-type":"application/json"}});case 3:return a=e.sent,s=localStorage.getItem("accountname"),e.next=7,j.Z.get("/post/".concat(s,"/userpost/?limit=3&skip=").concat(o),{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-type":"application/json"});case 7:return u=e.sent,e.next=10,Promise.all([a,u]);case 10:l=e.sent,f=[].concat((0,i.Z)(n),(0,i.Z)(l[0].data.posts),(0,i.Z)(l[1].data.post)),c(f),d(!1),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}());(0,s.useEffect)((function(){A()}),[]);var E=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.threshold,r=t.delay,i=t.trackVisibility,o=t.rootMargin,c=t.root,u=t.triggerOnce,l=t.skip,f=t.initialInView,d=t.fallbackInView,h=t.onChange,p=s.useState(null),v=(0,a.Z)(p,2),g=v[0],y=v[1],w=s.useRef(),Z=s.useState({inView:!!f,entry:void 0}),k=(0,a.Z)(Z,2),j=k[0],m=k[1];w.current=h,s.useEffect((function(){var e;if(!l&&g)return e=b(g,(function(t,n){m({inView:t,entry:n}),w.current&&w.current(t,n),n.isIntersecting&&u&&e&&(e(),e=void 0)}),{root:c,rootMargin:o,threshold:n,trackVisibility:i,delay:r},d),function(){e&&e()}}),[Array.isArray(n)?n.toString():n,g,c,o,u,l,i,d,r]);var x=null==(e=j.entry)?void 0:e.target;s.useEffect((function(){g||!x||u||l||m({inView:!!f,entry:void 0})}),[g,x,u,l,f]);var V=[y,j.inView,j.entry];return V.ref=V[0],V.inView=V[1],V.entry=V[2],V}(),M=(0,a.Z)(E,2),_=M[0],B=M[1];return(0,s.useEffect)((function(){B&&!O&&(g(v+10),k(Z+3),A(v,Z))}),[B,f]),(0,S.jsxs)(F.Z,{children:[(0,S.jsx)(m.Z,{type:"logo"}),n.length>0?(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(R,{feed:n.sort((function(e,t){return Date.parse(t.createdAt)-Date.parse(e.createdAt)})),setFeed:c,ref1:_,wait:2e3})}):(0,S.jsx)(I,{}),(0,S.jsx)(x.Z,{type:"\ud648"})]})}}}]);
//# sourceMappingURL=437.4b731895.chunk.js.map